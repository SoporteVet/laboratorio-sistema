<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Plantillas</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ABeeZee:ital@0;1&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=League+Spartan:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
</head>
<body>
    <body>
        <div class="controls">
            <label for="sexoSelector">Selecciona el sexo:</label>
            <select id="sexoSelector" onchange="actualizarSexoEnPlantilla(),actualizarValoresReferencia2()">
                <option value="Seleccionar" selected>-- Seleccionar --</option>
                <option value="Macho">Macho</option>
                <option value="Hembra">Hembra</option>
            </select>
            <label for="especieSelector">Selecciona la especie:</label>
            <select id="especieSelector" onchange="actualizarEspecieEnPlantilla(),actualizarValoresReferencia2()">
                <option value="Seleccionar" selected>-- Seleccionar --</option>
                <option value="Canino">Canino</option>
                <option value="Felino">Felino</option>
                <option value="Lagomorfo">Lagomorfo</option>
                <option value="Cuilo">Cuilo</option>
            </select>
            <label for="edadSelector">Selecciona el rango de edad:</label>
            <select id="edadSelector" onchange="actualizarValoresReferencia2()">
                <option value="Seleccionar" selected>-- Seleccionar --</option>
                <option value="De 1 año a 12 años">De 1 año a 12 años</option>
                <option value="De 6 meses a 1 año">De 6 meses a 1 año</option>
                <option value="De 3 meses a 6 meses">De 3 meses a 6 meses</option>
                <option value="Todas las edades">Todas las edades</option>
            </select>

        </div>
        <div class="container" id="template1" style="display: block;">
        <div class="header">
            <img src="img/empresa.jpg" alt="Logo de la Empresa" class="small-image">
            <h1>Laboratorio Clínico Veterinario</h1>
        </div>
        <h3 class="subheader">PANEL GENERAL BÁSICO</h3>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">DATOS DE LA MASCOTA</th>
                        <th colspan="2">DATOS DEL PROPIETARIO</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Nombre</td>
                        <td><input type="text" id="mascotaNombre" onkeydown="moverFocoConFlechas(event, 'propietarioNombre', 'propietarioNombre', 'mascotaNombre', 'mascotaRaza')"></td>
                        <td>Nombre</td>
                        <td><input type="text" id="propietarioNombre"  onkeydown="moverFocoConFlechas(event, 'propietarioCedula', 'mascotaNombre', 'mascotaNombre', 'propietarioCedula')"></td>
                    </tr>
                    <tr>
                        <td>Raza</td>
                        <td><input type="text" id="mascotaRaza" list="razas"  onkeydown="moverFocoConFlechas(event, 'propietarioCedula', 'mascotaNombre', 'mascotaNombre', 'mascotaSexo')"></td>
                        <datalist id="razas">

                        </datalist>
                        <td>Cédula</td>
                        <td><input type="text" id="propietarioCedula"  onkeydown="moverFocoConFlechas(event, 'propietarioTelefono', 'mascotaRaza', 'propietarioNombre', 'propietarioTelefono')"></td>
                    </tr>
                    <tr>
                        <td>Sexo</td>
                        <td><input type="text" id="sexoEnPlantilla"></td>
                        <td>Teléfono</td>
                        <td><input type="text" id="propietarioTelefono" onkeydown="moverFocoConFlechas(event, 'propietarioCedula', 'mascotaSexo', 'propietarioCedula', 'propietarioEmail')"></td>
                    </tr>
                    <tr>
                        <td>Especie</td>
                        <td><input type="text" id="especieEnPlantilla"></td>
                        <td>Email</td>
                        <td><input type="text" id="propietarioEmail"  onkeydown="moverFocoConFlechas(event, 'mascotaEspecie', 'mascotaEspecie', 'propietarioTelefono', 'nombreMedico')"></td>
                    </tr>
                    <tr>
                        <td>Edad</td>
                        <td><input type="text" id="mascotaEdad" list="edades"  onkeydown="moverFocoConFlechas(event, 'nombreMedico', 'mascotaEspecie', 'mascotaEspecie', 'mascotaPeso')"></td>
    
                        <datalist id="edades">
                        <option value="1 año"><option value="2 años"><option value="3 años"><option value="4 años">
                        <option value="5 años"><option value="6 años"><option value="7 años"><option value="8 años"><option value="9 años">
                        <option value="10 años"><option value="11 años"><option value="12 años">
                        </datalist>
                        <td>Médico</td>
                        <td>
                            <input type="text" id="nombreMedico" list="medicos" 
                                onkeydown="moverFocoConFlechas(event, 'propietarioFecha', 'mascotaEdad', 'propietarioEmail', 'propietarioFecha')" 
                                oninput="verificarMedico()">
                        </td>
                        <datalist id="medicos">
                            <option value="N.A">
                            <option value="Dr. Randall Azofeifa">
                            <option value="Dr. Luis Coto">
                            <option value="Dra. Daniela Sancho">
                            <option value="Dra. Sofia Carrillo">
                            <option value="Dra. Franciny Nuñez">
                            <option value="Dra. Alejandra León">
                            <option value="Dra. Kharen Moreno">
                            <option value="Dra. Karina Madrigal">
                            <option value="Dra. Natalia Alvarado">
                        </datalist>
                    </tr>
                    <tr>
                        <script>    
                            function actualizarSexoEnPlantilla() {
                                const sexo = document.getElementById('sexoSelector').value;
                                document.getElementById('sexoEnPlantilla').value = sexo.charAt(0).toUpperCase() + sexo.slice(1);
                            }
                            function actualizarEspecieEnPlantilla() {
                                const especie = document.getElementById('especieSelector').value;
                                document.getElementById('especieEnPlantilla').value = especie;
                            }
                            function verificarMedico() {
                                const medico = document.getElementById('nombreMedico').value;
                                const mensaje = document.getElementById('mensajeMedico');
                                if (medico === 'N.A' || medico === '') {
                                    mensaje.style.display = 'none';
                                } else {
                                    mensaje.style.display = 'block';
                                }
                            }
                            </script>
                    </tr>
                    <tr>
                        <td>Peso</td>
    <td><input type="text" id="mascotaPeso" list="pesos" onkeydown="moverFocoConFlechas(event, 'propietarioFecha', 'mascotaEdad', 'mascotaEdad', 'mascotaPeso')"></td>
    
        <datalist id="pesos">
            <option value="N.A">N.A</option><option value="0,1 kg">0,1 kg</option><option value="0,2 kg">0,2 kg</option><option value="0,3 kg">0,3 kg</option><option value="0,4 kg">0,4 kg</option>
            <option value="0,5 kg">0,5 kg</option><option value="0,6 kg">0,6 kg</option><option value="0,7 kg">0,7 kg</option><option value="0,8 kg">0,8 kg</option><option value="0,9 kg">0,9 kg</option>
            <option value="1,0 kg">1,0 kg</option><option value="1,1 kg">1,1 kg</option><option value="1,2 kg">1,2 kg</option><option value="1,3 kg">1,3 kg</option><option value="1,4 kg">1,4 kg</option>
            <option value="1,5 kg">1,5 kg</option><option value="1,6 kg">1,6 kg</option><option value="1,7 kg">1,7 kg</option><option value="1,8 kg">1,8 kg</option><option value="1,9 kg">1,9 kg</option>
            <option value="2,0 kg">2,0 kg</option><option value="2,1 kg">2,1 kg</option><option value="2,2 kg">2,2 kg</option><option value="2,3 kg">2,3 kg</option><option value="2,4 kg">2,4 kg</option>
            <option value="2,5 kg">2,5 kg</option><option value="2,6 kg">2,6 kg</option><option value="2,7 kg">2,7 kg</option><option value="2,8 kg">2,8 kg</option><option value="2,9 kg">2,9 kg</option>
            <option value="3,0 kg">3,0 kg</option><option value="3,1 kg">3,1 kg</option><option value="3,2 kg">3,2 kg</option><option value="3,3 kg">3,3 kg</option><option value="3,4 kg">3,4 kg</option>
            <option value="3,5 kg">3,5 kg</option><option value="3,6 kg">3,6 kg</option><option value="3,7 kg">3,7 kg</option><option value="3,8 kg">3,8 kg</option><option value="3,9 kg">3,9 kg</option>
            <option value="4,0 kg">4,0 kg</option><option value="4,1 kg">4,1 kg</option><option value="4,2 kg">4,2 kg</option><option value="4,3 kg">4,3 kg</option><option value="4,4 kg">4,4 kg</option>
            <option value="4,5 kg">4,5 kg</option><option value="4,6 kg">4,6 kg</option><option value="4,7 kg">4,7 kg</option><option value="4,8 kg">4,8 kg</option><option value="4,9 kg">4,9 kg</option>
            <option value="5,0 kg">5,0 kg</option><option value="5,1 kg">5,1 kg</option><option value="5,2 kg">5,2 kg</option><option value="5,3 kg">5,3 kg</option><option value="5,4 kg">5,4 kg</option>
            <option value="5,5 kg">5,5 kg</option><option value="5,6 kg">5,6 kg</option><option value="5,7 kg">5,7 kg</option><option value="5,8 kg">5,8 kg</option><option value="5,9 kg">5,9 kg</option>
            <option value="6,0 kg">6,0 kg</option><option value="6,1 kg">6,1 kg</option><option value="6,2 kg">6,2 kg</option><option value="6,3 kg">6,3 kg</option><option value="6,4 kg">6,4 kg</option>
            <option value="6,5 kg">6,5 kg</option><option value="6,6 kg">6,6 kg</option><option value="6,7 kg">6,7 kg</option><option value="6,8 kg">6,8 kg</option><option value="6,9 kg">6,9 kg</option>
            <option value="7,0 kg">7,0 kg</option><option value="7,1 kg">7,1 kg</option><option value="7,2 kg">7,2 kg</option><option value="7,3 kg">7,3 kg</option><option value="7,4 kg">7,4 kg</option>
            <option value="7,5 kg">7,5 kg</option><option value="7,6 kg">7,6 kg</option><option value="7,7 kg">7,7 kg</option><option value="7,8 kg">7,8 kg</option><option value="7,9 kg">7,9 kg</option>
            <option value="8,0 kg">8,0 kg</option><option value="8,1 kg">8,1 kg</option><option value="8,2 kg">8,2 kg</option><option value="8,3 kg">8,3 kg</option><option value="8,4 kg">8,4 kg</option>
            <option value="8,5 kg">8,5 kg</option><option value="8,6 kg">8,6 kg</option><option value="8,7 kg">8,7 kg</option><option value="8,8 kg">8,8 kg</option><option value="8,9 kg">8,9 kg</option>
            <option value="9,0 kg">9,0 kg</option><option value="9,1 kg">9,1 kg</option><option value="9,2 kg">9,2 kg</option><option value="9,3 kg">9,3 kg</option><option value="9,4 kg">9,4 kg</option>
            <option value="9,5 kg">9,5 kg</option><option value="9,6 kg">9,6 kg</option><option value="9,7 kg">9,7 kg</option><option value="9,8 kg">9,8 kg</option><option value="9,9 kg">9,9 kg</option>
            <option value="10,0 kg">10,0 kg</option><option value="10,1 kg">10,1 kg</option><option value="10,2 kg">10,2 kg</option><option value="10,3 kg">10,3 kg</option><option value="10,4 kg">10,4 kg</option>
            <option value="10,5 kg">10,5 kg</option><option value="10,6 kg">10,6 kg</option><option value="10,7 kg">10,7 kg</option><option value="10,8 kg">10,8 kg</option><option value="10,9 kg">10,9 kg</option>
            <option value="11,0 kg">11,0 kg</option><option value="11,1 kg">11,1 kg</option><option value="11,2 kg">11,2 kg</option><option value="11,3 kg">11,3 kg</option><option value="11,4 kg">11,4 kg</option>
            <option value="11,5 kg">11,5 kg</option><option value="11,6 kg">11,6 kg</option><option value="11,7 kg">11,7 kg</option><option value="11,8 kg">11,8 kg</option><option value="11,9 kg">11,9 kg</option>
            <option value="12,0 kg">12,0 kg</option>
            
        </datalist>
            <td>Fecha</td>
            <td><input type="date" id="propietarioFecha" class="date-input" onkeydown="moverFocoConFlechas(event, 'nombreMedico', 'mascotaPeso', 'nombreMedico', 'propietarioFecha')"></td>
                    </tr>
                    
                    <script>
                  function formatearFecha(input) {
                const fecha = new Date(input.value);
                const dia = String(fecha.getDate()).padStart(2, '0');
                const mes = String(fecha.getMonth() + 1).padStart(2, '0');
                const año = fecha.getFullYear();
                input.value = `${dia}-${mes}-${año}`;
            }
       
            function moverFocoConFlechas(event, derechaId, izquierdaId, arribaId, abajoId) {
                switch (event.key) {
                    case 'ArrowRight':
                        event.preventDefault();
                        document.getElementById(derechaId).focus();
                        break;
                    case 'ArrowLeft':
                        event.preventDefault();
                        document.getElementById(izquierdaId).focus();
                        break;
                    case 'ArrowUp':
                        event.preventDefault();
                        document.getElementById(arribaId).focus();
                        break;
                    case 'ArrowDown':
                        event.preventDefault();
                        document.getElementById(abajoId).focus();
                        break;
                    case ' ': 
                        event.preventDefault();
                        document.getElementById(derechaId).focus(); 
                        break;
                }
            }
            const razasCaninas = [
    "Ainu", "Airedale terrier", "Akita", "Akita Inu", "Alaskan Malamute",
    "American Black and Tan Coonhound", "American Bull Terrier", "American Pit Bull Terrier",
    "American Staffordshire terrier", "American Water Spaniel", "Apso Tibetano", "Barzoi", 
    "Basenji", "Basset Hound", "Beagle", "Bichon Frise", "Bloodhound", "Bobtail", 
    "Border Collie", "Boston Terrier", "Bouvier des Flandres", "Boxer", "Bull terrier", 
    "Bull Terrier Miniatura", "Bulldog Americano", "Bulldog Francés", "Bulldog Inglés", 
    "Bullmastiff", "Cavalier King Charles Spaniel", "Chihuahua", "Chow Chow", 
    "Cocker Spaniel Americano", "Cocker Spaniel Inglés", "Collie", "Collie Escocés", 
    "Dachshund", "Dálmata", "Doberman", "Doberman Pincher", "Dogo Alemán", 
    "Dogo Argentino", "Dogo de Burdeos", "French Poodle", "Galgo Español", 
    "Galgo Inglés-español", "Golden Retriever", "Gran Danés", "Greyhound", 
    "Husky Siberiano", "Jack Russell Terrier", "Labrador Retriever", "Maltés", 
    "Pastor Alemán", "Pequinés", "Pomerania", "Pug", "Rottweiler", "Samoyedo", 
    "San Bernardo", "Schnauzer Gigante", "Schnauzer Mediano", "Schnauzer Miniatura", 
    "Shih Tzu", "SRD", "Yorkshire Terrier"
];

const razasFelinas = [
    "Abisinio", "American Bobtail", "Angora Turco", "Azul Ruso", "Balinés", 
    "Bengalí", "Bobtail japonés", "Bombay", "British Shorthair", "Burmés", 
    "Carey", "Común Europeo", "Exótico", "Himalayo", "Javanés", 
    "Oriental", "Persa", "Sagrado de Birmania", "Siamés", "Siberiano", 
    "Silvestre", "SRD"
];

// Función para actualizar el datalist de razas según la especie seleccionada
function actualizarRazasPorEspecie() {
    const especie = document.getElementById('especieSelector').value;
    // Crear el datalist si no existe
    let datalistRazas = document.getElementById('razas');
    if (!datalistRazas) {
        datalistRazas = document.createElement('datalist');
        datalistRazas.id = 'razas';
        document.body.appendChild(datalistRazas);
    } else {
        // Limpiar la lista actual
        datalistRazas.innerHTML = '';
    }
    
    const campoRaza = document.getElementById('mascotaRaza');
    
    // Restablecer el campo de raza si se cambia la especie
    if (campoRaza.value && campoRaza.value !== "SRD") {
        campoRaza.value = '';
    }
    
    // Agregar las razas según la especie seleccionada
    if (especie === "Canino") {
        razasCaninas.forEach(raza => {
            const option = document.createElement('option');
            option.value = raza;
            datalistRazas.appendChild(option);
        });
    } else if (especie === "Felino") {
        razasFelinas.forEach(raza => {
            const option = document.createElement('option');
            option.value = raza;
            datalistRazas.appendChild(option);
        });
    } else if (especie === "Lagomorfo" || especie === "Cuilo") {
        // Para otras especies, agregar solo opciones genéricas
        const option = document.createElement('option');
        option.value = "SRD";
        datalistRazas.appendChild(option);
    }
}

// Modificar la función existente
function actualizarEspecieEnPlantilla() {
    const especie = document.getElementById('especieSelector').value;
    document.getElementById('especieEnPlantilla').value = especie;
    
    // Actualizar las razas disponibles según la especie
    actualizarRazasPorEspecie();
}

// Ejecutar al cargar la página
document.addEventListener('DOMContentLoaded', function() {
    // Asegurarse de que existe el selector de especies
    const especieSelector = document.getElementById('especieSelector');
    if (especieSelector) {
        // Si ya hay una especie seleccionada al cargar
        if (especieSelector.value !== "Seleccionar") {
            actualizarRazasPorEspecie();
        }
        
        // Agregar un listener adicional para garantizar que se actualicen las razas
        especieSelector.addEventListener('change', actualizarRazasPorEspecie);
    }
    
    // Crear datalist si no existe
    if (!document.getElementById('razas')) {
        const datalist = document.createElement('datalist');
        datalist.id = 'razas';
        document.body.appendChild(datalist);
    }
});
            
                    </script>
                </tbody>
            </table>
    
        <h3 class="titulos">DEPARTAMENTO DE QUIMICA CLINICA</h3>
        <table>
            <thead>
                <tr>
                    <th>PARÁMETRO</th>
                    <th>RESULTADO</th>
                    <th>VALOR DE REFERENCIA</th>
                    <th>UNIDADES</th>
                </tr>
            </thead>
            <tbody>
                <script>
            const valoresReferencia2 = {
                    Canino: {
                        Macho: {
                            "De 1 año a 12 años": {
                                Glucosa: "77 - 126",
                                Colesterol_total: "129 - 331",		
                                Amilasa: "400 - 2500",
                                CK: "32 - 157",
                                Nitrógeno_Ureico:	"7 - 23",
                                Creatinina: "0,6 - 1,2",
                                Relación_BUN_Crea:	" 4,2 - 32,8 ",
                                Calcio: "9,0 - 11,4",
                                Fosforo: "3,3 - 6,4",
                                ALT: "15 - 52",
                                Fosfatasa_Alcalina: "20 - 70",
                                Bilirrubina_Total: "0,2- 0,8",
                                Albumina: "2,6 - 3,6",
                                Proteínas_Totales: "5,4 - 7,2",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1 ",
                            },
                        "De 6 meses a 1 año": {
                                Glucosa: "76 - 129",
                                Colesterol_total: "129 - 271",		
                                Amilasa: "363 - 916",
                                CK: "42 - 525",
                                Nitrógeno_Ureico:	"7,3 - 23,5",
                                Creatinina: "0,7 - 1,4",
                                Relación_BUN_Crea:	" 4,2 - 32,8 ",
                                Calcio: "9,2 - 13,0",
                                Fosforo: "4,8 - 9,0",
                                ALT: "19 - 47",
                                Fosfatasa_Alcalina: "32 - 97",
                                Bilirrubina_Total: "0,2- 0,9",
                                Albumina: "2,7 - 3,5",
                                Proteínas_Totales: "5,1 - 7,3",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1 ",
                            },
                            "De 3 meses a 6 meses": {
                                Glucosa: "89 - 133",
                                Colesterol_Total: "115 - 255",
                                Amilasa: "262 - 621",
                                CK: "53 - 241",
                                Nitrógeno_Ureico: "7 - 19",
                                Creatinina: "0,3 - 0,9",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "7,2 - 10,1",
                                Calcio: "9,8 - 12,4",
                                ALT: "13 - 30",
                                Fosfatasa_Alcalina: "85 - 199",
                                Bilirrubina_Total: "0,2 - 0,9",
                                Albumina: "2,4 - 3,1",
                                Proteínas_Totales: "4,6 - 5,6",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1"
                            },
                        },
                        Hembra: {
                            "De 1 año a 12 años": {
                                Glucosa: "77 - 126",
                                Colesterol_total: "129 - 331",		
                                Amilasa: "400 - 2500",
                                CK: "36 - 211",
                                Nitrógeno_Ureico:	"7 - 23",
                                Creatinina: "0,6 - 1,2",
                                Relación_BUN_Crea:	" 4,2 - 32,8 ",
                                Calcio: "9,0 - 11,4",
                                Fosforo: "3,3 - 6,4",
                                ALT: "15 - 52",
                                Fosfatasa_Alcalina: "20 - 70",
                                Bilirrubina_Total: "0,2- 0,8",
                                Albumina: "2,6 - 3,6",
                                Proteínas_Totales: "5,4 - 7,2",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1 ",
                            },
                            "De 6 meses a 1 año": {
                                Glucosa: "89 - 127",
                                Colesterol_Total: "127 - 247",
                                Amilasa: "255 - 832",
                                CK: "45 - 531",
                                Nitrógeno_Ureico: "10 - 27",
                                Creatinina: "0.7 - 1.4",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "4,4 - 9,2",
                                Calcio: "9,4 - 11,7",
                                ALT: "16 - 49",
                                Fosfatasa_Alcalina: "29 - 97",
                                Bilirrubina_Total: "0,2 - 1,1",
                                Albumina: "2,7 - 3,6",
                                Proteínas_Totales: "5,1 - 6,9",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1",
                            },
                            "De 3 meses a 6 meses": {
                                Glucosa: "82 - 130",
                                Colesterol_Total: "105 - 241",
                                Amilasa: "281 - 636",
                                CK: "34 - 272",
                                Nitrógeno_Ureico: "7 - 19",
                                Creatinina: "0,4 - 0,9",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "7,5 - 10,0",
                                Calcio: "10,1 - 12,3",
                                ALT: "9 - 27",
                                Fosfatasa_Alcalina: "77 - 180",
                                Bilirrubina_Total: "0,2 - 0,9",
                                Albumina: "2,4 - 3,1",
                                Proteínas_Totales: "4,6 - 5,8",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1"
                            },
                        }
                    },
                    Felino: {
                        Macho: {
                            "De 1 año a 12 años": {
                                Glucosa: "65 - 111",
                                Colesterol_Total: "76 - 146",
                                Amilasa: "400 - 2500",
                                CK: "150 - 798",
                                Nitrógeno_Ureico: "20 - 42",
                                Creatinina: "0,5 - 1,8",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "4,1 - 6,4",
                                Calcio: "8,3 - 10,4",
                                ALT: "20 - 67",
                                Fosfatasa_Alcalina: "13 - 47",
                                Bilirrubina_Total: "0,2 - 0,7",
                                Albumina: "2,8 - 3,7",
                                Proteínas_Totales: "5,8 - 7,6",
                                Globulinas_Totales: "2,6 - 4,5",
                                Relación_Albumina_Globulina: "0,5 - 1,3",     
                            },
                            "De 6 meses a 1 años": {
                                Glucosa: "67 - 101",
                                Colesterol_Total: "68 - 128",
                                Amilasa: "396 - 754",
                                CK: "184 - 885",
                                Nitrógeno_Ureico: "14 - 36",
                                Creatinina: "0,4 - 1,2",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "6,2 - 9,1",
                                Calcio: "8,9 - 10,1",
                                ALT: "19 - 72",
                                Fosfatasa_Alcalina: "21 - 95",
                                Bilirrubina_Total: "0,2 - 0,8",
                                Albumina: "2,4 - 3,6",
                                Proteínas_Totales: "5,3 - 6,9",
                                Globulinas_Totales: "2,6 - 4,5",
                                Relación_Albumina_Globulina: "0,5 - 1,3"
                            },
                            "De 3 meses a 6 meses": {
                                Glucosa: "61 - 102",
                                Colesterol_Total: "66 - 132",
                                Amilasa: "403 - 752",
                                CK: "185 - 814",
                                Nitrógeno_Ureico: "19 - 34",
                                Creatinina: "0,4 - 0,9",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "7,1 - 9,5",
                                Calcio: "9,1 - 10,9",
                                ALT: "18 - 55",
                                Fosfatasa_Alcalina: "43 - 124",
                                Bilirrubina_Total: "0,2 - 0,8",
                                Albumina: "2,7 - 3,6",
                                Proteínas_Totales: "5,4 - 6,6",
                                Globulinas_Totales: "2,6 - 4,5",
                                Relación_Albumina_Globulina: "0,5 - 1,3"
                            },
                        },
                        Hembra: {
                            "De 1 año a 12 años": {
                                Glucosa: "65 - 112",
                                Colesterol_Total: "51 - 112",
                                Amilasa: "400 - 2500",
                                CK: "164 - 930",
                                Nitrógeno_Ureico: "19 - 30",
                                Creatinina: "0,6 - 1,7",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "3,2 - 6,6",
                                Calcio: "7,8 - 9,2",
                                ALT: "22 - 79",
                                Fosfatasa_Alcalina: "12 - 55",
                                Bilirrubina_Total: "0,3 - 1,1",
                                Albumina: "2,4 - 3,0",
                                Proteínas_Totales: "5,6 - 7,7",
                                Globulinas_Totales: "2,6 - 4,5",
                                Relación_Albumina_Globulina: "0,5 - 1,3"
                            },
                            "De 6 meses a 1 año": {
                                Glucosa: "67 - 102",
                                Colesterol_Total: "56 - 114",
                                Amilasa: "352 - 833",
                                CK: "172 - 875",
                                Nitrógeno_Ureico: "19 - 37",
                                Creatinina: "0,3 - 1,2",
                                Relación_BUN_Crea: "4,2 - 32,8",
                                Fosforo: "4,9 - 8,3",
                                Calcio: "8,5 - 10,3",
                                ALT: "25 - 77",
                                Fosfatasa_Alcalina: "22 - 100",
                                Bilirrubina_Total: "0,2 - 0,9",
                                Albumina: "2,5 - 3,6",
                                Proteínas_Totales: "5,4 - 7,2",
                                Globulinas_Totales: "2,6 - 4,5",
                                Relación_Albumina_Globulina: "0,5 - 1,3"
                        },
                        "De 3 meses a 6 meses": {
                            Glucosa: "59 - 99",
                            Colesterol_Total: "63 - 113",
                            Amilasa: "464 - 988",
                            CK: "188 - 894",
                            Nitrógeno_Ureico: "19 - 33",
                            Creatinina: "0,4 - 0,9",
                            Relación_BUN_Crea: "4,2 - 32,8",
                            Fosforo: "6,9 - 9,5",
                            Calcio: "8,9 - 10,9",
                            ALT: "19 - 58",
                            Fosfatasa_Alcalina: "39 - 114",
                            Bilirrubina_Total: "0,1 - 0,6",
                            Albumina: "2,5 - 3,5",
                            Proteínas_Totales: "5,4 - 6,8",
                            Globulinas_Totales: "2,6 - 4,5",
                            Relación_Albumina_Globulina: "0,5 - 1,3"
                            },
                        }
                    },
                    Lagomorfo: {
                        Macho: {
                            "Todas las edades": {
                                Glucosa: "60,0 - 125,0",
                                Colesterol_Total: "20,0 - 43,0",
                                Amilasa: "",
                                CK: "",
                                Nitrógeno_Ureico: "9,0 - 32,0",
                                Creatinina: "0,6 - 2,2",
                                Relación_BUN_Crea: "",
                                Fosforo: "",
                                Calcio: "7,8 - 10,5",
                                ALT: "10,0 - 25,0",
                                Fosfatasa_Alcalina: "",
                                Bilirrubina_Total: "0,3 - 0,9",
                                Albumina: "2,1 - 3,9",
                                Proteínas_Totales: "4,6 - 6,2",
                                Globulinas_Totales: "1,7 - 2,6",
                                Relación_Albumina_Globulina: "",
                            },
                        },
                        Hembra: {
                            "Todas las edades": {
                                Glucosa: "77 - 126",
                                Colesterol_total: "129 - 331",		
                                Amilasa: "400 - 2500",
                                CK: "32 - 157",
                                Nitrógeno_Ureico:	"7 - 23",
                                Creatinina: "0,6 - 1,2",
                                Relación_BUN_Crea:	" 4,2 - 32,8 ",
                                Calcio: "9,0 - 11,4",
                                Fosforo: "14,2 - 18,9",
                                ALT: "3,3 - 6,4",
                                Fosfatasa_Alcalina: "15 - 52",
                                Bilirrubina_Total: "0,2- 0,8",
                                Albumina: "2,6 - 3,6",
                                Proteínas_Totales: "2,6 - 3,6",
                                Globulinas_Totales: "3,0 - 4,7",
                                Relación_Albumina_Globulina: "0,6 - 1,1 ",
                            },
                            },
                        },
                    Cuilo: {
                        Macho: {
                            "Todas las edades": {
                                Glucosa: "60 - 125",
                                Colesterol_Total: "20 - 43",
                                Amilasa: "",
                                CK: "",
                                Nitrógeno_Ureico: "9,0 - 32,0",
                                Creatinina: "0,6 - 2,2",
                                Relación_BUN_Crea: "",
                                Fosforo: "0 - 5,3",
                                Calcio: "7,8 - 10,5",
                                ALT: "10,0 - 25,0",
                                Fosfatasa_Alcalina: "",
                                Bilirrubina_Total: "0,3 - 0,9",
                                Albumina: "2,1 - 3,9",
                                Proteínas_Totales: "4,6 - 6,2",
                                Globulinas_Totales: "1,7 - 2,6",
                                Relación_Albumina_Globulina: ""
                            },
                        },
                        Hembra: {
                            "Todas las edades": {
                                Glucosa: "60 - 125",
                                Colesterol_Total: "20 - 43",
                                Amilasa: "",
                                CK: "",
                                Nitrógeno_Ureico: "9,0 - 32,0",
                                Creatinina: "0,6 - 2,2",
                                Relación_BUN_Crea: "",
                                Fosforo: "0 - 5,3",
                                Calcio: "7,8 - 10,5",
                                ALT: "10,0 - 25,0",
                                Fosfatasa_Alcalina: "",
                                Bilirrubina_Total: "0,3 - 0,9",
                                Albumina: "2,1 - 3,9",
                                Proteínas_Totales: "4,6 - 6,2",
                                Globulinas_Totales: "1,7 - 2,6",
                                Relación_Albumina_Globulina: ""
                            },
                            },
                        },
                    };
    </script>
                    <script>
   function actualizarValoresReferencia2() {
    const especie = document.getElementById('especieSelector').value;
    const sexo = document.getElementById('sexoSelector').value;
    const edad = document.getElementById('edadSelector').value;

    if (especie !== "Seleccionar" && sexo !== "Seleccionar" && edad !== "Seleccionar") {
        const refValores = valoresReferencia2[especie][sexo][edad];
        document.getElementById('refglucosa').innerText = refValores.Glucosa || '';
        document.getElementById('refcolesterolT').innerText = refValores.Colesterol_total || '';
        document.getElementById('refamilasa').innerText = refValores.Amilasa || '';
        document.getElementById('refCK').innerText = refValores.CK || '';
        document.getElementById('refnitrogeno_ureico').innerText = refValores.Nitrógeno_Ureico || '';
        document.getElementById('refcreatinina').innerText = refValores.Creatinina || '';
        document.getElementById('refbun_crea').innerText = refValores.Relación_BUN_Crea || '';
        document.getElementById('reffosforo').innerText = refValores.Fosforo || '';
        document.getElementById('refcalcio').innerText = refValores.Calcio || '';
        document.getElementById('refALT').innerText = refValores.ALT || '';
        document.getElementById('refFosfatasa_Alcalina').innerText = refValores.Fosfatasa_Alcalina || '';
        document.getElementById('refbillirrubina').innerText = refValores.Bilirrubina_Total || '';
        document.getElementById('refalbumina').innerText = refValores.Albumina || '';
        document.getElementById('refproteinas_totales').innerText = refValores.Proteínas_Totales || '';
        document.getElementById('refglobulinas').innerText = refValores.Globulinas_Totales || '';
        document.getElementById('refalb_glo').innerText = refValores.Relación_Albumina_Globulina || '';
    } else {
        document.getElementById('refglucosa').innerText = "";
        document.getElementById('refcolesterolT').innerText = "";
        document.getElementById('refamilasa').innerText = "";
        document.getElementById('refCK').innerText = "";
        document.getElementById('refnitrogeno_ureico').innerText = "";
        document.getElementById('refcreatinina').innerText = "";
        document.getElementById('refbun_crea').innerText = "";
        document.getElementById('reffosforo').innerText = "";
        document.getElementById('refcalcio').innerText = "";
        document.getElementById('refALT').innerText = "";
        document.getElementById('refFosfatasa_Alcalina').innerText = "";
        document.getElementById('refbillirrubina').innerText = "";
        document.getElementById('refalbumina').innerText = "";
        document.getElementById('refproteinas_totales').innerText = "";
        document.getElementById('refglobulinas').innerText = "";
        document.getElementById('refalb_glo').innerText = "";
    }
}
function actualizarColor(inputId, refId) {
    const input = document.getElementById(inputId);
    const refElement = document.getElementById(refId);
    
    if (!input || !refElement || !refElement.innerText) {
        console.error(`No se pudo encontrar el elemento con ID ${inputId} o ${refId}`);
        return;
    }
    
    const ref = refElement.innerText;
    const valor = parseFloat(input.value.replace(',', '.'));
    
    // Si el valor no es un número válido, salir
    if (isNaN(valor)) return;
    
    // Extraer los valores mínimo y máximo del rango de referencia
    const rangeParts = ref.split(' - ').map(v => parseFloat(v.replace(',', '.')));
    if (rangeParts.length !== 2 || isNaN(rangeParts[0]) || isNaN(rangeParts[1])) {
        console.error(`Formato de rango inválido: ${ref}`);
        return;
    }
    
    const [min, max] = rangeParts;
    
    if (valor < min) {
        input.style.color = '#0096d2'; 
        input.style.fontWeight = 'bold'; 
    } else if (valor > max) {
        input.style.color = 'red';  
        input.style.fontWeight = 'bold'; 
    } else {
        input.style.color = 'black';  
        input.style.fontWeight = 'bold'; 
    }
}

// Corregir los event listeners con IDs correctos
document.addEventListener('DOMContentLoaded', function() {
    const parametros = [
        { input: 'Glucosa', ref: 'refglucosa' },
        { input: 'Colesterol_total', ref: 'refcolesterolT' },
        { input: 'amilasa', ref: 'refamilasa' },
        { input: 'CK', ref: 'refCK' },
        { input: 'nitrogeno_ureico', ref: 'refnitrogeno_ureico' },
        { input: 'creatinina', ref: 'refcreatinina' },
        { input: 'bun_crea', ref: 'refbun_crea' },
        { input: 'fosforo', ref: 'reffosforo' },
        { input: 'calcio', ref: 'refcalcio' },
        { input: 'ALT', ref: 'refALT' },
        { input: 'Fosfatasa_Alcalina', ref: 'refFosfatasa_Alcalina' },
        { input: 'billirrubina', ref: 'refbillirrubina' },
        { input: 'Albumina', ref: 'refalbumina' },
        { input: 'proteinas_totales', ref: 'refproteinas_totales' },
        { input: 'Globulinas', ref: 'refglobulinas' },
        { input: 'alb/glo', ref: 'refalb_glo' } 
    ];
    
    // Asignar event listeners a cada campo
    parametros.forEach(param => {
        const inputElement = document.getElementById(param.input);
        if (inputElement) {
            inputElement.addEventListener('input', () => {
                actualizarColor(param.input, param.ref);
            });
            
            inputElement.addEventListener('blur', () => {
                actualizarColor(param.input, param.ref);
            });
        }
    });
});

    </script>
    </script>
            </script>
            <tr>
                <td>GLUCOSA</td>
                <td>
                <input type="text" id="Glucosa" list="rangoglucosa" onkeydown="moverFoco(event, 'Glucosa')">                </td>
                <td id="refglucosa">77 - 126</td>
                <td>mg/dl</td>
                <script type="module">
                    import { Recuentolglucosa } from './numeros.js';
            
                    document.addEventListener('DOMContentLoaded', () => {
                        const datalist = document.getElementById('rangoglucosa');
                        Recuentolglucosa.forEach(valor => {
                            const option = document.createElement('option');
                            option.value = parseInt(valor.replace(',', '.'));
                            datalist.appendChild(option);
                        });
                    });
                </script>
                </tr>
                <tr>
                    <td>COLESTEROL TOTAL</td>
                    <td>
                        <input type="text" id="Colesterol_total" list="rangocolesterolT" onkeydown="moverFoco(event, 'Colesterol_total')">                        <datalist id="rangocolesterolT"></datalist>
                    </td>
                    <td id="refcolesterolT">129 - 331</td>
                    <td>mg/dl</td>
                    <script type="module">
                        import { recuentocolesterol_total } from './numeros.js';
       
                           document.addEventListener('DOMContentLoaded', () => {
                               const datalist = document.getElementById('rangocolesterolT');
                               recuentocolesterol_total.forEach(valor => {
                                   const option = document.createElement('option');
                                   option.value = parseInt(valor.replace(',', '.'))
                                   datalist.appendChild(option);
                               });
                           });
                           </script>
                </tr>
                <tr>
                    <td>AMILASA</td>
                    <td>
                        <input type="text" id="amilasa" list="rangoamilasa" onblur="formatearDecimal('amilasa')" onkeydown="moverFoco(event, 'amilasa')">
                        <datalist id="rangoamilasa"></datalist>
                    </td>
                    <td id="refamilasa">400 - 2500</td>
                    <td>U/L</td>
                </tr>
                <tr>
                    <td>CK</td>
                    <td>
                        <input type="text" id="CK" list="rangock" onkeydown="moverFoco(event, 'CK')">
                        <datalist id="rangock"></datalist>
                    </td>
                    <td id="refCK">32 - 157</td>
                    <td>U/L</td>
                    <script type="module">
                        import { recuentock } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangock');
                            recuentock.forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseInt(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                    </tr>
            </tbody>
        </table>
    
        <h3 class="titulos">FUNCIONAMIENTO RENAL</h3>
        <table>
            <thead>
                <tr>
                    <th>PARÁMETRO</th>
                    <th>RESULTADO</th>
                    <th>VALOR DE REFERENCIA</th>
                    <th>UNIDADES</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>NITROGENO UREICO</td>
                    <td>
                        <input type="text" id="nitrogeno_ureico" list="rangonitrogeno_ureico" onblur="formatearDecimal('nitrogeno_ureico')" onkeydown="moverFoco(event, 'nitrogeno_ureico')">
                        <datalist id="rangonitrogeno_ureico"></datalist>
                    </td>
                    <td id="refnitrogeno_ureico">7 - 23</td>
                    <td>mg/dl</td>
                    <script type="module">
                        import { recuentoNitrogenoUreico } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangonitrogeno_ureico');
                            recuentoNitrogenoUreico.forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseInt(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>CREATININA</td>
                    <td>
                        <input type="text" id="creatinina" list="rangocreatinina" onblur="formatearDecimal('creatinina')" onkeydown="moverFoco(event, 'creatinina')">
                        <datalist id="rangocreatinina"></datalist>
                    </td>
                    <td id="refcreatinina">0,6 - 1,2</td>
                    <td>mg/dl</td>
                    <script type="module">
                        import { recuentoCreatinina } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangocreatinina');
                            recuentoCreatinina.forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>RELACIÓN BUN/CREA</td>
                    <td>
                        <input type="text" id="bun_crea" list="rangobun_crea" onblur="formatearDecimal('bun_crea')" onkeydown="moverFoco(event, 'bun_crea')">
                        <datalist id="rangobun_crea"></datalist>
                    </td>
                    <td id="refbun_crea"> 4,2 - 32,8 </td>
                    <td>mg/dl</td>
                    <script type="module">
                        import { recuentobuncrea } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangobun_crea');
                            recuentobuncrea.forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>FOSFORO</td>
                    <td>
                        <input type="text" id="fosforo" list="rangofosforo" onblur="formatearDecimal('fosforo')" onkeydown="moverFoco(event, 'fosforo')">
                        <datalist id="rangofosforo"></datalist>
                    </td>
                    <td id="reffosforo">3,3 - 6,4</td>
                    <td>mg/dl</td>
                    <script type="module">
                        import { recuentofosforo } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangofosforo');
                            recuentofosforo.forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>CALCIO</td>
                    <td>
                        <input type="text" id="calcio" list="rangocalcio" onblur="formatearDecimal('calcio')" onkeydown="moverFoco(event, 'calcio')">
                        <datalist id="rangocalcio"></datalist>
                    </td>
                    <td id="refcalcio">9,0 - 11,4</td>
                    <td>mg/dl</td>
                    <script type="module">
                        import {  recuentocalcio  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangocalcio');
                            recuentocalcio .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
            </tbody>
        </table>
    
        <h3 class="titulos">FUNCIONAMIENTO HÉPATICO</h3>
        <table>
            <thead>
                <tr>
                    <th>PARÁMETRO</th>
                    <th>RESULTADO</th>
                    <th>VALOR DE REFERENCIA</th>
                    <th>UNIDADES</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ALT</td>
                    <td>
                        <input type="text" id="ALT" list="rangoALT" onblur="formatearDecimal('ALT')" onkeydown="moverFoco(event, 'ALT')">
                        <datalist id="rangoALT"></datalist>
                    </td>
                    <td id="refALT">15 - 52</td>
                    <td>U/L</td>
                    <script type="module">
                        import {  recuentoalt  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoALT');
                            recuentoalt .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseInt(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>FOSFATASA ALCALINA</td>
                    <td>
                        <input type="text" id="Fosfatasa_Alcalina" list="rangoFosfatasa_Alcalina" onblur="formatearDecimal('Fosfatasa_Alcalina')" onkeydown="moverFoco(event, 'Fosfatasa_Alcalina')">
                        <datalist id="rangoFosfatasa_Alcalina"></datalist>
                    </td>
                    <td id="refFosfatasa_Alcalina">20 - 70</td>
                    <td>U/L</td>
                    <script type="module">
                        import {  recuentofosfatasa  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoFosfatasa_Alcalina');
                            recuentofosfatasa .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseInt(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>BILLIRRUBINA TOTAL</td>
                    <td>
                        <input type="text" id="billirrubina_total" list="rangobillirrubina" onblur="formatearDecimal('billirrubina_total')" onkeydown="moverFoco(event, 'billirrubina_total')">
                        <datalist id="rangobillirrubina"></datalist>
                    </td>
                    <td id="refbillirrubina"> 0,2 - 0,8 </td>
                    <td>mg/dl</td>
                    <script type="module">
                        import {  recuentobillirrubina  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangobillirrubina');
                            recuentobillirrubina .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                            
                        });
                    </script>
                </tr>
            </tbody>
        </table>
    
        <h3 class="titulos">FUNCIONAMIENTO SANGUINEO</h3>
        <table>
            <thead>
                <tr>
                    <th>PARÁMETRO</th>
                    <th>RESULTADO</th>
                    <th>VALOR DE REFERENCIA</th>
                    <th>UNIDADES</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ALBUMINA</td>
                    <td>
                        <input type="text" id="Albumina" list="rangoalbumina" onblur="formatearDecimal('Albumina')" onkeydown="moverFoco(event, 'Albumina')">
                        <datalist id="rangoalbumina"></datalist>
                    </td>
                    <td id="refalbumina">2,6 - 3,6</td>
                    <td>g/dl</td>
                    <script type="module">
                        import {  recuentoalbumina  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoalbumina');
                            recuentoalbumina .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
            document.getElementById('Albumina').addEventListener('input', calculateValues);
            document.getElementById('proteinas_totales').addEventListener('input', calculateValues);
        });
                    </script>
                </tr>
                    <td>PROTEINAS TOTALES</td>
                    <td>
                        <input type="text" id="proteinas_totales" list="rangoproteinas" onblur="formatearDecimal('proteinas_totales')" onkeydown="moverFoco(event, 'proteinas_totales')">
                        <datalist id="rangoproteinas"></datalist>
                    </td>
                    <td id="refproteinas_totales">5,4 - 7,2</td>
                    <td>g/dl</td>
                    <script type="module">
                        import {  recuentoproteinas  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoproteinas');
                            recuentoproteinas .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>GLOBULINAS TOTALES</td>
                    <td>
                        <input type="text" id="Globulinas" list="rangoglubolinas" onblur="formatearDecimal('Globulinas')" onkeydown="moverFoco(event, 'Globulinas')">
                        <datalist id="rangoglobulinas"></datalist>
                    </td>
                    <td id="refglobulinas">3,0 - 4,7</td>
                    <td>g/dl</td>
                    <script type="module">
                        import {  recuentoglobulinas  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoglobulinas');
                            recuentoglobulinas .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <tr>
                    <td>RELACIÓN ALBUMINA/GLOBULINAS</td>
                    <td>
                        <input type="text" id="alb/glo" list="rangoalb/glo" onblur="formatearDecimal('alb/glo')" onkeydown="moverFoco(event, 'alb/glo')">
                        <datalist id="rangoalb/glo"></datalist>
                    </td>
                    <td id="refalb/glo"> 0,6 - 1,1 </td>
                    <td>mg/dl</td>
                    <script type="module">
                        import {  recuentoalb_glo  } from './numeros.js';
                    
                        document.addEventListener('DOMContentLoaded', () => {
                            const datalist = document.getElementById('rangoalb/glo');
                            recuentoalb_glo .forEach(valor => {
                                const option = document.createElement('option');
                                option.value = parseFloat(valor.replace(',', '.'));
                                datalist.appendChild(option);
                            });
                        });
                    </script>
                </tr>
                <script>
function calculateValues() {
    const albumina = parseFloat(document.getElementById('Albumina').value.replace(',', '.')) || 0;
    const proteinasTotales = parseFloat(document.getElementById('proteinas_totales').value.replace(',', '.')) || 0;
    
    const globulinasTotales = proteinasTotales - albumina;
    
    let relacionAlbGlo = 0;
    if (globulinasTotales > 0) {
        relacionAlbGlo = albumina / globulinasTotales;
    }
    
    document.getElementById('Globulinas').value = globulinasTotales.toFixed(1).replace('.', ',');
    document.getElementById('alb/glo').value = relacionAlbGlo.toFixed(1).replace('.', ',');
    
    actualizarColor('Globulinas', 'refglobulinas');
    actualizarColor('alb/glo', 'refalb_glo');
}

// Asegurarse que los event listeners estén correctamente asignados
document.addEventListener('DOMContentLoaded', function() {
    // Asignar event listeners para los campos de interés
    const albuminaInput = document.getElementById('Albumina');
    const proteinasInput = document.getElementById('proteinas_totales');
    
    if (albuminaInput) {
        albuminaInput.addEventListener('input', calculateValues);
        albuminaInput.addEventListener('blur', calculateValues);
    }
    
    if (proteinasInput) {
        proteinasInput.addEventListener('input', calculateValues);
        proteinasInput.addEventListener('blur', calculateValues);
    }
    
    // También calcular los valores iniciales si ya hay datos
    calculateValues();
});
            </script>
            </tbody>
        </table>
    
        <h3 class="titulos">INDICES DE INTERFERENCIA</h3>
        <table>
            <tbody>
                <tr>
                    <td>SUERO HEMOLITICO</td>
                    <td>
                        <select id="suero_hemolitico2">
                            <option value="No se observa">No se observa</option>
                            <option value="Se observa">Se observa</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>SUERO LIPEMICO</td>
                    <td>
                        <select id="suero_lipemico2">
                            <option value="No se observa">No se observa</option>
                            <option value="Se observa">Se observa</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>SUERTO ICTERICO</td>
                    <td>
                        <select id="suero_icterico2">
                            <option value="No se observa">No se observa</option>
                            <option value="Se observa">Se observa</option>
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="footer">
            <p id="mensajeMedico" style="display: none;">El personal médico cuenta con un plazo de 24 a 48 horas para interpretar el reporte de los resultados.</p>
            <p>Facebook: Veterinaria San Martin de Porres | Teléfono: 4000 - 1365 | Ext: 106</p>
            <p>WhatsApp: 8839 - 2214 | San Rafael Abajo de Desamparados, 50 metros Norte del Mall Zona Centro</p>
            <p>Correo: laboratorio@vetsanmartin.com</p>
        </div>
    </div>
    <div class="controls">
        <button id="pdfButton" onclick="generatePDF()">Generar PDF</button>
        <button id="menuButton" onclick="window.location.href='../menu.html'">Volver al Menú</button>
        <div id="loadingPdf" class="loading-indicator">
            <div class="spinner"></div>
            <span>Generando PDF...</span>
        </div>
    </div>
    <div class="parameter-selector-panel">
        <h3>Eliminar parámetros</h3>
        <div class="selector-container">
            <select id="parameterSelector" class="parameter-dropdown">
                <option value="" selected disabled>-- Seleccionar parámetro --</option>
            </select>
            <button onclick="eliminarParametroSeleccionado()" class="remove-param-btn">Eliminar</button>
        </div>
    </div>

    <script>
        function moverFoco(event, actualId) {
    if (event.key === 'Enter') { // Si la tecla presionada es espacio
        event.preventDefault(); // Prevenir que se inserte el espacio
        
        // Definir el orden de navegación entre campos
        const camposParametros = [
            'Glucosa', 
            'Colesterol_total', 
            'amilasa', 
            'CK', 
            'nitrogeno_ureico', 
            'creatinina', 
            'bun_crea', 
            'fosforo', 
            'calcio', 
            'ALT', 
            'Fosfatasa_Alcalina', 
            'billirrubina_total', 
            'Albumina', 
            'proteinas_totales', 
            'Globulinas', 
            'alb/glo'
        ];
        
        // Encontrar la posición actual
        const indiceActual = camposParametros.indexOf(actualId);
        
        // Si encontramos el campo actual y no es el último
        if (indiceActual !== -1 && indiceActual < camposParametros.length - 1) {
            // Mover al siguiente campo
            const siguienteId = camposParametros[indiceActual + 1];
            const siguienteCampo = document.getElementById(siguienteId);
            
            if (siguienteCampo) {
                siguienteCampo.focus();
                // Seleccionar todo el texto si existe
                if (siguienteCampo.value) {
                    siguienteCampo.select();
                }
            }
        }
    }
}
document.addEventListener('DOMContentLoaded', () => {
    cargarListaDeParametros();
});

function cargarListaDeParametros() {
    const selector = document.getElementById('parameterSelector');
    selector.innerHTML = '<option value="" selected disabled>-- Seleccionar parámetro --</option>';
    
    // Obtener todas las filas de parámetros de las tablas
    const tablas = document.querySelectorAll('.container table tbody');
    
    tablas.forEach((tabla, tablaIndex) => {
        const filas = tabla.querySelectorAll('tr');
        
        filas.forEach((fila, filaIndex) => {
            // Obtener el nombre del parámetro (primera celda)
            const paramName = fila.cells[0]?.textContent.trim();
            if (!paramName || paramName === "Nombre" || paramName === "Raza" || 
                paramName === "Sexo" || paramName === "Especie" || paramName === "Edad" ||
                paramName === "Peso" || paramName === "SUERO HEMOLITICO" || 
                paramName === "SUERO LIPEMICO" || paramName === "SUERTO ICTERICO") {
                return; // Ignorar filas de datos de mascota y propietario
            }
            
            // Crear un ID único para la fila
            const filaId = `fila-${tablaIndex}-${filaIndex}`;
            fila.id = filaId;
            
            // Añadir opción al selector
            const option = document.createElement('option');
            option.value = filaId;
            option.textContent = paramName;
            selector.appendChild(option);
        });
    });
}

function eliminarParametroSeleccionado() {
    const selector = document.getElementById('parameterSelector');
    const filaId = selector.value;
    
    if (!filaId) {
        alert('Por favor, selecciona un parámetro para eliminar.');
        return;
    }
    
    const fila = document.getElementById(filaId);
    if (fila) {
        fila.remove();
        
        // Actualizar el selector después de eliminar
        cargarListaDeParametros();
    }
}
    function actualizarSexoEnPlantilla() {
        const sexo = document.getElementById('sexoSelector').value;
        document.getElementById('sexoEnPlantilla').value = sexo.charAt(0).toUpperCase() + sexo.slice(1);
    }
    function actualizarEspecieEnPlantilla() {
        const especie = document.getElementById('especieSelector').value;
        document.getElementById('especieEnPlantilla').value = especie;
    }
    function verificarMedico2() {
        const medico = document.getElementById('nombreMedico').value;
        const mensaje = document.getElementById('mensajeMedico');
        if (medico === 'N.A' || medico === '') {
            mensaje.style.display = 'none';
        } else {
            mensaje.style.display = 'block';
        }
    }
    </script>
        <script>
            function toggleTemplate() {
                const templates = document.querySelectorAll('.container');
                const selectedTemplate = document.getElementById(document.getElementById('templateSelector').value);
                templates.forEach(template => template.style.display = 'none');
                if (selectedTemplate) selectedTemplate.style.display = 'block';
            }
    
            function actualizarSexoEnPlantilla() {
                const sexo = document.getElementById('sexoSelector').value;
                document.querySelectorAll('.container').forEach(template => {
                    const input = template.querySelector('#sexoEnPlantilla, #sexoEnPlantilla2');
                    if (input) input.value = sexo;
                });
            }
    
            function actualizarEspecieEnPlantilla() {
                const especie = document.getElementById('especieSelector').value;
                document.querySelectorAll('.container').forEach(template => {
                    const input = template.querySelector('#especieEnPlantilla, #especieEnPlantilla2');
                    if (input) input.value = especie;
                });
            }
    
            function actualizarValoresReferencia() {
                const especie = document.getElementById('especieSelector').value;
                const sexo = document.getElementById('sexoSelector').value;
                const edad = document.getElementById('edadSelector').value;
                // Lógica para actualizar los valores de referencia en todas las plantillas
            }
    
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const templates = document.querySelectorAll('.container');
            const templateSelector = document.getElementById('templateSelector');
        
            templateSelector.addEventListener('change', () => {
                templates.forEach(template => template.style.display = 'none');
                const selectedTemplate = document.getElementById(templateSelector.value);
                if (selectedTemplate) selectedTemplate.style.display = 'block';
            });
        });
        
        function printTemplate() {
            const templateSelector = document.getElementById('templateSelector');
            const selectedTemplate = document.getElementById(templateSelector.value);
        
            if (!selectedTemplate) {
                alert('Selecciona una plantilla antes de imprimir.');
                return;
            }
        
            // Crear un contenedor temporal para la impresión
            const printContainer = document.createElement('div');
            printContainer.id = 'printContainer';
            printContainer.style.display = 'none';
            document.body.appendChild(printContainer);
        
            // Clonar la plantilla seleccionada y agregarla al contenedor de impresión
            const clone = selectedTemplate.cloneNode(true);
            printContainer.appendChild(clone);
        
            // Ocultar todas las plantillas excepto la seleccionada
            const templates = document.querySelectorAll('.container');
            templates.forEach(template => {
                if (template !== selectedTemplate) {
                    template.style.display = 'none';
                }
            });
        
            // Mostrar el contenedor de impresión y ocultar el resto del contenido
            printContainer.style.display = 'block';
            document.querySelector('.controls').style.display = 'none';
        
            // Imprimir el contenido del contenedor de impresión
            window.print();
        
            // Restaurar la visibilidad de todas las plantillas y controles
            printContainer.style.display = 'none';
            document.querySelector('.controls').style.display = 'block';
            templates.forEach(template => {
                template.style.display = 'none';
            });
            selectedTemplate.style.display = 'block';
        
            // Eliminar el contenedor de impresión
            document.body.removeChild(printContainer);
        }
        </script>
    <script>
   document.addEventListener('DOMContentLoaded', () => {
        const templates = document.querySelectorAll('.container');
        const templateSelector = document.getElementById('templateSelector');
    
        templateSelector.addEventListener('change', () => {
            templates.forEach(template => template.style.display = 'none');
            const selectedTemplate = document.getElementById(templateSelector.value);
            if (selectedTemplate) selectedTemplate.style.display = 'block';
        });
    });
    async function generatePDF() {
    // Mostrar el indicador de carga
    const loadingIndicator = document.getElementById('loadingPdf');
    const pdfButton = document.getElementById('pdfButton');
    
    loadingIndicator.style.display = 'flex';
    pdfButton.disabled = true;
    
    try {
        const { jsPDF } = window.jspdf;
        const selectedTemplate = document.getElementById('template1');

        if (!selectedTemplate) {
            alert('No se encontró la plantilla.');
            return;
        }

        // Obtener el nombre de la mascota y el apellido del propietario
        const mascotaNombre = document.getElementById('mascotaNombre').value || 'Sin_nombre';
        const propietarioNombre = document.getElementById('propietarioNombre').value || 'Sin_apellido';
        const propietarioApellido = propietarioNombre.split(' ').pop(); // Obtener el último nombre como apellido

        // Espera a que todas las imágenes dentro del elemento se carguen
        const images = selectedTemplate.getElementsByTagName('img');
        const loadImages = Array.from(images).map(img => {
            return new Promise((resolve, reject) => {
                if (img.complete) {
                    resolve();
                } else {
                    img.onload = resolve;
                    img.onerror = reject;
                }
            });
        });

        await Promise.all(loadImages);

        // Genera el canvas
        const canvas = await html2canvas(selectedTemplate, {
            scale: 2,
            useCORS: true,
            logging: true,
            allowTaint: true,
            backgroundColor: '#ffffff'
        });

        const imgData = canvas.toDataURL('image/jpeg', 1.0);
        const pdf = new jsPDF('p', 'mm', 'a4');
        const imgWidth = 150; 
        const pageHeight = 297;
        const imgHeight = (canvas.height * imgWidth) / canvas.width;

        // Calcular la posición para centrar la imagen con márgenes
        const x = (pdf.internal.pageSize.getWidth() - imgWidth) / 2;
        const y = 5;

        // Agrega la imagen de la plantilla escalada y centrada
        pdf.addImage(imgData, 'JPEG', x, y, imgWidth, imgHeight);

        // Genera el nombre del archivo según la plantilla actual y datos
        const fileName = `Panel General Básico ${mascotaNombre} ${propietarioApellido}.pdf`;

        // Guarda el PDF
        pdf.save(fileName);
    } catch (error) {
        console.error('Error al generar el PDF:', error);
        alert('Ocurrió un error al generar el PDF: ' + error.message);
    } finally {
        // Ocultar el indicador de carga y habilitar el botón nuevamente
        loadingIndicator.style.display = 'none';
        pdfButton.disabled = false;
    }
}
</script>
        <script type="module" src="numeros.js"></script>
    </body>
    </html>
    